services:
    conduit:
        image: ghcr.io/psiphon-inc/conduit/cli:latest
        container_name: conduit
        restart: unless-stopped
        command:
            [
                "start",
                "--max-clients",
                "50",
                "--bandwidth",
                "50",
                "--data-dir",
                "/home/conduit/data",
                "--metrics-addr",
                "0.0.0.0:9090",
            ]
        # Metrics are exposed inside the container on :9090.
        # To scrape from the host, publish the port (e.g., "9090:9090").
        volumes:
            - conduit-data:/home/conduit/data

volumes:
    conduit-data:
